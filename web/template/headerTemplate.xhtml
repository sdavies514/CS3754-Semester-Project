<?xml version="1.0" encoding="UTF-8"?>
<!--
Created by Casey Butenhoff on 2017.11.18
Copyright Â© 2017 Casey Butenhoff. All rights reserved.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <!--
    *********************************************
    * Header Component of Template siteTemplate *
    *********************************************
    This page's content is displayed on the top of each page created based on the siteTemplate.
    Changes made in this file will show up automatically with all pages created based on the
    siteTemplate for the entire site, achieving great maintainability.
    -->

    <!-- Do not enter tags before the composition line since they are ignored by JSF -->
    <ui:composition>
        <h:form>

            <table border="0" cellspacing="0" cellpadding="10" width="100%">
                <tr>
                    <td align="left" valign="middle">

                        <!-- Use absolute path for the image file since it will be accessed from all pages -->
                        <h:link outcome="/index"><img src="#{resource['images:thoughtwareLogo.png']}"
                                                      style="width:100%; height:100%; max-height:64px; max-width:150px; border: none"
                                                      alt="Company Logo" />
                        </h:link>

                    </td>
                    <!-- Welcome the user if signed in -->
                    <td align="center" valign="middle">

                        <c:if test="#{accountManager.isLoggedIn() == true}">
                            <h1>Hello, #{accountManager.selected.firstName}</h1>
                        </c:if>
                        <c:if test="#{accountManager.isLoggedIn() == false}">
                            <h1>Hello, Guest</h1>
                        </c:if>

                    </td>
                    <td align="right" valign="middle">
                        
                        <p:menubar style="width: 475px">
                            <p:menuitem value="Home" outcome="/index" styleClass="arialTen" icon="fa fa-home" />
                            
                            <c:if test="#{accountManager.isLoggedIn() == true}">
                                <p:submenu label="My Projects" icon="ui-icon-bookmark">
                                    <c:forEach items="#{projectController.userItems}" var="proj">
                                        <p:submenu label="#{proj.name}">
                                            <p:menuitem value="Project Home" action="#{projectViewManager.showProjectHome(proj)}"  />
                                            <p:menuitem value="Timeline" action="#{projectViewManager.showProjectTimeline(proj)}" />
                                            <p:menuitem value="Files" action="#{projectViewManager.showProjectFiles(proj)}" />
                                            <p:menuitem value="Calendar" action="#{projectViewManager.showProjectCalendar(proj)}" /> 
                                        </p:submenu>
                                    </c:forEach>
                                </p:submenu>
                                
                                <p:menuitem value="My Account" outcome="/Profile" styleClass="arialTen" icon="fa fa-user" />
                                
                                <p:menuitem value="Projects" outcome="/ListProject" styleClass="arialTen" icon="fa fa-tasks" />
                                
                                <f:facet name="options">
                                    <p:commandButton value="Sign Out" action="#{accountManager.logout()}" 
                                                     styleClass="commandButton" icon="fa fa-sign-out" />
                                </f:facet>
                            </c:if>
                            
                            <c:if test="#{accountManager.isLoggedIn() == false}">
                                <p:menuitem value="Sign In" outcome="/SignIn" styleClass="arialTen" icon="fa fa-sign-in" />
                                
                                <p:menuitem value="Create an Account" outcome="/CreateAccount" styleClass="arialTen" icon="fa fa-user-plus" />
                            </c:if>
                        </p:menubar>
                    </td>
                </tr>
            </table>

        </h:form>

    </ui:composition>
    <!-- Do not enter tags before the composition line since they are ignored by JSF -->

</html>
